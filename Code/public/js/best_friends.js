// Generated by CoffeeScript 1.3.1
(function() {
  var dashFlag, dotOrDash, drawSignalLine, morseTimer, moveSignalStep, sendSignal;

  morseTimer = null;

  dashFlag = false;

  $(function() {
    return $('#morse-sender').mousedown(function() {
      return morseTimer = setTimeout(dotOrDash, 250);
    });
  });

  $(function() {
    return $('#morse-sender').mouseup(function() {
      $('#morse-receiver').text($('#morse-receiver').text() + (dashFlag ? 'dash' : 'dot'));
      clearTimeout(morseTimer);
      return dashFlag = false;
    });
  });

  dotOrDash = function() {
    return dashFlag = true;
  };

  sendSignal = function(x) {
    return moveSignalStep(x);
  };

  moveSignalStep = function(step) {
    var context;
    context = document.getElementById("morseCanvas").getContext('2d');
    context.clearRect(0, 0, context.canvas.width, context.canvas.height);
    drawSignalLine();
    context.fillRect(46 * step, 10, 10, 10);
    if (step <= 10) {
      return setTimeout((function() {
        return sendSignal(step + 1);
      }), 250);
    }
  };

  drawSignalLine = function() {
    var context;
    context = document.getElementById("morseCanvas").getContext('2d');
    context.moveTo(5, 25);
    context.lineTo(470, 25);
    context.strokeStyle = "#000";
    return context.stroke();
  };

  $(function() {
    return $(document).ready(function() {
      return sendSignal(1);
    });
  });

}).call(this);
